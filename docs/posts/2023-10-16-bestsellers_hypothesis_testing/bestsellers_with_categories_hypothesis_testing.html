<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Micael García">
<meta name="dcterms.date" content="2023-10-16">
<meta name="description" content="A series of posts exploring hypothesis testing for beginners.">

<title>Micael - Exploring Hypothesis Testing: A Series for Beginners 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Micael</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html" rel="" target="">
 <span class="menu-text">My Blog</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Exploring Hypothesis Testing: A Series for Beginners 1</h1>
                  <div>
        <div class="description">
          A series of posts exploring hypothesis testing for beginners.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">EDA</div>
                <div class="quarto-category">hypothesis-testing</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Micael García </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 16, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="exploring-hypothesis-testing-a-series-for-beginners" class="level1">
<h1>Exploring Hypothesis Testing: A Series for Beginners</h1>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="data-understanding" class="level2">
<h2 class="anchored" data-anchor-id="data-understanding">2. Data Understanding</h2>
<section id="data-description" class="level3">
<h3 class="anchored" data-anchor-id="data-description">2.2 Data description</h3>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"bestsellers with categories.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Author</th>
<th data-quarto-table-cell-role="th">User Rating</th>
<th data-quarto-table-cell-role="th">Reviews</th>
<th data-quarto-table-cell-role="th">Price</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Genre</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>10-Day Green Smoothie Cleanse</td>
<td>JJ Smith</td>
<td>4.7</td>
<td>17350</td>
<td>8</td>
<td>2016</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>11/22/63: A Novel</td>
<td>Stephen King</td>
<td>4.6</td>
<td>2052</td>
<td>22</td>
<td>2011</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>12 Rules for Life: An Antidote to Chaos</td>
<td>Jordan B. Peterson</td>
<td>4.7</td>
<td>18979</td>
<td>15</td>
<td>2018</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1984 (Signet Classics)</td>
<td>George Orwell</td>
<td>4.7</td>
<td>21424</td>
<td>6</td>
<td>2017</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>5,000 Awesome Facts (About Everything!) (Natio...</td>
<td>National Geographic Kids</td>
<td>4.8</td>
<td>7665</td>
<td>12</td>
<td>2019</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>A Dance with Dragons (A Song of Ice and Fire)</td>
<td>George R. R. Martin</td>
<td>4.4</td>
<td>12643</td>
<td>11</td>
<td>2011</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>A Game of Thrones / A Clash of Kings / A Storm...</td>
<td>George R. R. Martin</td>
<td>4.7</td>
<td>19735</td>
<td>30</td>
<td>2014</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>A Gentleman in Moscow: A Novel</td>
<td>Amor Towles</td>
<td>4.7</td>
<td>19699</td>
<td>15</td>
<td>2017</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>A Higher Loyalty: Truth, Lies, and Leadership</td>
<td>James Comey</td>
<td>4.7</td>
<td>5983</td>
<td>3</td>
<td>2018</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>A Man Called Ove: A Novel</td>
<td>Fredrik Backman</td>
<td>4.6</td>
<td>23848</td>
<td>8</td>
<td>2016</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>A Man Called Ove: A Novel</td>
<td>Fredrik Backman</td>
<td>4.6</td>
<td>23848</td>
<td>8</td>
<td>2017</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>A Patriot's History of the United States: From...</td>
<td>Larry Schweikart</td>
<td>4.6</td>
<td>460</td>
<td>2</td>
<td>2010</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>A Stolen Life: A Memoir</td>
<td>Jaycee Dugard</td>
<td>4.6</td>
<td>4149</td>
<td>32</td>
<td>2011</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>A Wrinkle in Time (Time Quintet)</td>
<td>Madeleine L'Engle</td>
<td>4.5</td>
<td>5153</td>
<td>5</td>
<td>2018</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>Act Like a Lady, Think Like a Man: What Men Re...</td>
<td>Steve Harvey</td>
<td>4.6</td>
<td>5013</td>
<td>17</td>
<td>2009</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>Adult Coloring Book Designs: Stress Relief Col...</td>
<td>Adult Coloring Book Designs</td>
<td>4.5</td>
<td>2313</td>
<td>4</td>
<td>2016</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>Adult Coloring Book: Stress Relieving Animal D...</td>
<td>Blue Star Coloring</td>
<td>4.6</td>
<td>2925</td>
<td>6</td>
<td>2015</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>Adult Coloring Book: Stress Relieving Patterns</td>
<td>Blue Star Coloring</td>
<td>4.4</td>
<td>2951</td>
<td>6</td>
<td>2015</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>Adult Coloring Books: A Coloring Book for Adul...</td>
<td>Coloring Books for Adults</td>
<td>4.5</td>
<td>2426</td>
<td>8</td>
<td>2015</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>Alexander Hamilton</td>
<td>Ron Chernow</td>
<td>4.8</td>
<td>9198</td>
<td>13</td>
<td>2016</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>All the Light We Cannot See</td>
<td>Anthony Doerr</td>
<td>4.6</td>
<td>36348</td>
<td>14</td>
<td>2014</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>All the Light We Cannot See</td>
<td>Anthony Doerr</td>
<td>4.6</td>
<td>36348</td>
<td>14</td>
<td>2015</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>Allegiant</td>
<td>Veronica Roth</td>
<td>3.9</td>
<td>6310</td>
<td>13</td>
<td>2013</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>American Sniper: The Autobiography of the Most...</td>
<td>Chris Kyle</td>
<td>4.6</td>
<td>15921</td>
<td>9</td>
<td>2015</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>And the Mountains Echoed</td>
<td>Khaled Hosseini</td>
<td>4.3</td>
<td>12159</td>
<td>13</td>
<td>2013</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>Arguing with Idiots: How to Stop Small Minds a...</td>
<td>Glenn Beck</td>
<td>4.6</td>
<td>798</td>
<td>5</td>
<td>2009</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">26</td>
<td>Astrophysics for People in a Hurry</td>
<td>Neil deGrasse Tyson</td>
<td>4.7</td>
<td>9374</td>
<td>9</td>
<td>2017</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>Autobiography of Mark Twain, Vol. 1</td>
<td>Mark Twain</td>
<td>4.2</td>
<td>491</td>
<td>14</td>
<td>2010</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>Baby Touch and Feel: Animals</td>
<td>DK</td>
<td>4.6</td>
<td>5360</td>
<td>5</td>
<td>2015</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>Balance (Angie's Extreme Stress Menders)</td>
<td>Angie Grace</td>
<td>4.6</td>
<td>1909</td>
<td>11</td>
<td>2015</td>
<td>Non Fiction</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li>Name
<ul>
<li>Título del libro</li>
<li>Unidad: texto (categoría)</li>
</ul></li>
<li>Author
<ul>
<li>Nombre del autor</li>
<li>Unidad: texto (categoría)</li>
</ul></li>
<li>User Rating
<ul>
<li>Calificación promedio del libro por los usuarios</li>
<li>Unidad: número entre 0 y 5 (con decimales)</li>
</ul></li>
<li>Reviews
<ul>
<li>Número de reseñas</li>
<li>Unidad: número entero</li>
</ul></li>
<li>Price
<ul>
<li>Precio del libro</li>
<li>Unidad: número entero</li>
</ul></li>
<li>Year
<ul>
<li>Año en el que el libro fue de los más vendidos</li>
<li>Unidad: año (número entero)</li>
</ul></li>
<li>Genre
<ul>
<li>Género del libro simplificado (Fiction o Non Fiction)</li>
<li>Unidad: categorico con dos valores posibles</li>
</ul></li>
</ul>
</section>
</section>
<section id="data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation">3. Data preparation</h2>
<section id="typecasting" class="level3">
<h3 class="anchored" data-anchor-id="typecasting">3.1 Typecasting</h3>
</section>
</section>
<section id="business-understanding" class="level2">
<h2 class="anchored" data-anchor-id="business-understanding">1. Business Understanding</h2>
<p>dataset source: https://www.kaggle.com/datasets/sootersaalu/amazon-top-50-bestselling-books-2009-2019/data</p>
<section id="context" class="level3">
<h3 class="anchored" data-anchor-id="context">Context</h3>
<p>Datos sobre los 50 libros más vendidos en Amazon de 2009 a 2019.</p>
</section>
<section id="hypothesis-to-test" class="level3">
<h3 class="anchored" data-anchor-id="hypothesis-to-test">Hypothesis to Test</h3>
<p>Vamos a responder a las siguientes preguntas con validez estadística:</p>
<ul>
<li>¿Los géneros difieren en User Rating?</li>
<li>¿Los géneros difieren en número de Reviews?</li>
<li>¿Los géneros difieren en términos de precio?</li>
</ul>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># comprobamos el tipo de datos de las columnas</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df.dtypes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>Name            object
Author          object
User Rating    float64
Reviews          int64
Price            int64
Year             int64
Genre           object
dtype: object</code></pre>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>columnas_categoricas <span class="op">=</span> [<span class="st">"Genre"</span>, <span class="st">"Name"</span>, <span class="st">"Author"</span>]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df[columnas_categoricas] <span class="op">=</span> df[columnas_categoricas].astype(<span class="st">"category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df.dtypes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>Name           category
Author         category
User Rating     float64
Reviews           int64
Price             int64
Year              int64
Genre          category
dtype: object</code></pre>
</div>
</div>
</section>
<section id="handling-duplicates" class="level3">
<h3 class="anchored" data-anchor-id="handling-duplicates">3.2 Handling Duplicates</h3>
<p>Comprobar si hay autores o títulos iguales pero escritos diferente.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fuzzywuzzy <span class="im">import</span> fuzz</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Función para encontrar nombres de autores similares</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> encontrar_similares(df, columna):</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    autores <span class="op">=</span> df[columna].unique()</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    duplicados <span class="op">=</span> []</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, autor1 <span class="kw">in</span> <span class="bu">enumerate</span>(autores):</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> autor2 <span class="kw">in</span> autores[i <span class="op">+</span> <span class="dv">1</span> :]:</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>            ratio <span class="op">=</span> fuzz.ratio(autor1, autor2)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> ratio <span class="op">&gt;</span> <span class="dv">90</span>:  <span class="co"># Puedes ajustar este umbral según tu criterio</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>                duplicados.append((autor1, autor2))</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> duplicados</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encuentra nombres de autores similares</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>duplicados <span class="op">=</span> encontrar_similares(df, <span class="st">"Author"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Nombres de autores que se refieren al mismo autor pero están escritos diferente:"</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> dup <span class="kw">in</span> duplicados:</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(dup)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Nombres de autores que se refieren al mismo autor pero están escritos diferente:
('George R. R. Martin', 'George R.R. Martin')
('J.K. Rowling', 'J. K. Rowling')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace the names of the Authors with the correct ones</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.replace(<span class="st">"George R. R. Martin"</span>, <span class="st">"George R.R. Martin"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.replace(<span class="st">"J. K. Rowling"</span>, <span class="st">"J.K. Rowling"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encuentra nombres de títulos similares</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>duplicados <span class="op">=</span> encontrar_similares(df, <span class="st">"Name"</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Nombres de autores que se refieren al mismo autor pero están escritos diferente:"</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> dup <span class="kw">in</span> duplicados:</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(dup)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Nombres de autores que se refieren al mismo autor pero están escritos diferente:
('The 5 Love Languages: The Secret to Love That Lasts', 'The 5 Love Languages: The Secret to Love that Lasts')
('The Girl Who Played with Fire (Millennium Series)', 'The Girl Who Played with Fire (Millennium)')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace the names of the Authors with the correct ones</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.replace(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"The 5 Love Languages: The Secret to Love That Lasts"</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"The 5 Love Languages: The Secret to Love that Lasts"</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.replace(</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"The Girl Who Played with Fire (Millennium Series)"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"The Girl Who Played with Fire (Millennium)"</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Author</th>
<th data-quarto-table-cell-role="th">User Rating</th>
<th data-quarto-table-cell-role="th">Reviews</th>
<th data-quarto-table-cell-role="th">Price</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Genre</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>10-Day Green Smoothie Cleanse</td>
<td>JJ Smith</td>
<td>4.7</td>
<td>17350</td>
<td>8</td>
<td>2016</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>11/22/63: A Novel</td>
<td>Stephen King</td>
<td>4.6</td>
<td>2052</td>
<td>22</td>
<td>2011</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>12 Rules for Life: An Antidote to Chaos</td>
<td>Jordan B. Peterson</td>
<td>4.7</td>
<td>18979</td>
<td>15</td>
<td>2018</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1984 (Signet Classics)</td>
<td>George Orwell</td>
<td>4.7</td>
<td>21424</td>
<td>6</td>
<td>2017</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>5,000 Awesome Facts (About Everything!) (Natio...</td>
<td>National Geographic Kids</td>
<td>4.8</td>
<td>7665</td>
<td>12</td>
<td>2019</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">545</td>
<td>Wrecking Ball (Diary of a Wimpy Kid Book 14)</td>
<td>Jeff Kinney</td>
<td>4.9</td>
<td>9413</td>
<td>8</td>
<td>2019</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">546</td>
<td>You Are a Badass: How to Stop Doubting Your Gr...</td>
<td>Jen Sincero</td>
<td>4.7</td>
<td>14331</td>
<td>8</td>
<td>2016</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">547</td>
<td>You Are a Badass: How to Stop Doubting Your Gr...</td>
<td>Jen Sincero</td>
<td>4.7</td>
<td>14331</td>
<td>8</td>
<td>2017</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">548</td>
<td>You Are a Badass: How to Stop Doubting Your Gr...</td>
<td>Jen Sincero</td>
<td>4.7</td>
<td>14331</td>
<td>8</td>
<td>2018</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">549</td>
<td>You Are a Badass: How to Stop Doubting Your Gr...</td>
<td>Jen Sincero</td>
<td>4.7</td>
<td>14331</td>
<td>8</td>
<td>2019</td>
<td>Non Fiction</td>
</tr>
</tbody>
</table>

<p>550 rows × 7 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># número de filas duplicadas</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>df.duplicated().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>0</code></pre>
</div>
</div>
<p>Es normal no encontrar duplicados en este caso, hay libros que se repiten pero es imposible que coincidan en “Year”. No es un error por si mismo. Pero hay un problema. Las “Reviews” deberían ser las que el libro tenia el año en el que fue de los mas vendidos. En lugar de eso son las del último año. Esto puede deberse a que el autor del dataset no tuvo acceso al historial de las reseñas.</p>
<p>Es importante tener en cuenta esto para el análisis.</p>
<p>Vamos a utilizar unicamente la muestra más reciente de cada libro.</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># todos los libros con el titulo repetido</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>df[df.duplicated(<span class="st">"Name"</span>)].head(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Author</th>
<th data-quarto-table-cell-role="th">User Rating</th>
<th data-quarto-table-cell-role="th">Reviews</th>
<th data-quarto-table-cell-role="th">Price</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Genre</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>A Man Called Ove: A Novel</td>
<td>Fredrik Backman</td>
<td>4.6</td>
<td>23848</td>
<td>8</td>
<td>2017</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>All the Light We Cannot See</td>
<td>Anthony Doerr</td>
<td>4.6</td>
<td>36348</td>
<td>14</td>
<td>2015</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>Becoming</td>
<td>Michelle Obama</td>
<td>4.8</td>
<td>61133</td>
<td>11</td>
<td>2019</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">36</td>
<td>Between the World and Me</td>
<td>Ta-Nehisi Coates</td>
<td>4.7</td>
<td>10070</td>
<td>13</td>
<td>2016</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">41</td>
<td>Brown Bear, Brown Bear, What Do You See?</td>
<td>Bill Martin Jr.</td>
<td>4.9</td>
<td>14344</td>
<td>5</td>
<td>2019</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">47</td>
<td>Catching Fire (The Hunger Games)</td>
<td>Suzanne Collins</td>
<td>4.7</td>
<td>22614</td>
<td>11</td>
<td>2011</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">48</td>
<td>Catching Fire (The Hunger Games)</td>
<td>Suzanne Collins</td>
<td>4.7</td>
<td>22614</td>
<td>11</td>
<td>2012</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">51</td>
<td>Crazy Love: Overwhelmed by a Relentless God</td>
<td>Francis Chan</td>
<td>4.7</td>
<td>1542</td>
<td>14</td>
<td>2010</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">52</td>
<td>Crazy Love: Overwhelmed by a Relentless God</td>
<td>Francis Chan</td>
<td>4.7</td>
<td>1542</td>
<td>14</td>
<td>2011</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">57</td>
<td>Cutting for Stone</td>
<td>Abraham Verghese</td>
<td>4.6</td>
<td>4866</td>
<td>11</td>
<td>2011</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">64</td>
<td>Dear Zoo: A Lift-the-Flap Book</td>
<td>Rod Campbell</td>
<td>4.8</td>
<td>10922</td>
<td>5</td>
<td>2016</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">65</td>
<td>Dear Zoo: A Lift-the-Flap Book</td>
<td>Rod Campbell</td>
<td>4.8</td>
<td>10922</td>
<td>5</td>
<td>2017</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">66</td>
<td>Dear Zoo: A Lift-the-Flap Book</td>
<td>Rod Campbell</td>
<td>4.8</td>
<td>10922</td>
<td>5</td>
<td>2018</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">70</td>
<td>Diagnostic and Statistical Manual of Mental Di...</td>
<td>American Psychiatric Association</td>
<td>4.5</td>
<td>6679</td>
<td>105</td>
<td>2014</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">76</td>
<td>Divergent</td>
<td>Veronica Roth</td>
<td>4.6</td>
<td>27098</td>
<td>15</td>
<td>2014</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">84</td>
<td>Dog Man: Brawl of the Wild: From the Creator o...</td>
<td>Dav Pilkey</td>
<td>4.9</td>
<td>7235</td>
<td>4</td>
<td>2019</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">94</td>
<td>Eat to Live: The Amazing Nutrient-Rich Program...</td>
<td>Joel Fuhrman MD</td>
<td>4.5</td>
<td>6346</td>
<td>9</td>
<td>2012</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">98</td>
<td>Educated: A Memoir</td>
<td>Tara Westover</td>
<td>4.7</td>
<td>28729</td>
<td>15</td>
<td>2019</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">101</td>
<td>Fahrenheit 451</td>
<td>Ray Bradbury</td>
<td>4.6</td>
<td>10721</td>
<td>8</td>
<td>2018</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">107</td>
<td>Fifty Shades of Grey: Book One of the Fifty Sh...</td>
<td>E L James</td>
<td>3.8</td>
<td>47265</td>
<td>14</td>
<td>2013</td>
<td>Fiction</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop duplicates</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>bestsellers <span class="op">=</span> df.drop_duplicates(subset<span class="op">=</span><span class="st">"Name"</span>, keep<span class="op">=</span><span class="st">"last"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>bestsellers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Author</th>
<th data-quarto-table-cell-role="th">User Rating</th>
<th data-quarto-table-cell-role="th">Reviews</th>
<th data-quarto-table-cell-role="th">Price</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Genre</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>10-Day Green Smoothie Cleanse</td>
<td>JJ Smith</td>
<td>4.7</td>
<td>17350</td>
<td>8</td>
<td>2016</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>11/22/63: A Novel</td>
<td>Stephen King</td>
<td>4.6</td>
<td>2052</td>
<td>22</td>
<td>2011</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>12 Rules for Life: An Antidote to Chaos</td>
<td>Jordan B. Peterson</td>
<td>4.7</td>
<td>18979</td>
<td>15</td>
<td>2018</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1984 (Signet Classics)</td>
<td>George Orwell</td>
<td>4.7</td>
<td>21424</td>
<td>6</td>
<td>2017</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>5,000 Awesome Facts (About Everything!) (Natio...</td>
<td>National Geographic Kids</td>
<td>4.8</td>
<td>7665</td>
<td>12</td>
<td>2019</td>
<td>Non Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">538</td>
<td>Winter of the World: Book Two of the Century T...</td>
<td>Ken Follett</td>
<td>4.5</td>
<td>10760</td>
<td>15</td>
<td>2012</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">539</td>
<td>Women Food and God: An Unexpected Path to Almo...</td>
<td>Geneen Roth</td>
<td>4.2</td>
<td>1302</td>
<td>11</td>
<td>2010</td>
<td>Non Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">544</td>
<td>Wonder</td>
<td>R. J. Palacio</td>
<td>4.8</td>
<td>21625</td>
<td>9</td>
<td>2017</td>
<td>Fiction</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">545</td>
<td>Wrecking Ball (Diary of a Wimpy Kid Book 14)</td>
<td>Jeff Kinney</td>
<td>4.9</td>
<td>9413</td>
<td>8</td>
<td>2019</td>
<td>Fiction</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">549</td>
<td>You Are a Badass: How to Stop Doubting Your Gr...</td>
<td>Jen Sincero</td>
<td>4.7</td>
<td>14331</td>
<td>8</td>
<td>2019</td>
<td>Non Fiction</td>
</tr>
</tbody>
</table>

<p>349 rows × 7 columns</p>
</div>
</div>
</div>
<p>Resumen: - Hemos corregido los errores ortográficos de los títulos y autores. - Hemos seleccionado las muestras más recientes de cada libro.</p>
<p>Hemos reducido el tamaño del dataset de 550 a 349 muestras.</p>
</section>
<section id="outlier-analysis" class="level3">
<h3 class="anchored" data-anchor-id="outlier-analysis">3.3 Outlier Analysis</h3>
<section id="usando-boxplot-y-iqr" class="level4">
<h4 class="anchored" data-anchor-id="usando-boxplot-y-iqr">3.3.2 Usando boxplot y IQR</h4>
<p>IQR: El rango intercuartil (IQR) es la diferencia entre el tercer cuartil (Q3) y el primer cuartil (Q1). Los valores que caen por debajo de Q1 - 1.5 * IQR o por encima de Q3 + 1.5 * IQR se consideran outliers.</p>
<p>Los valores fuera del de este rango, son los que se representa como puntos en los bloxpots.</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="op">=</span> [<span class="st">"Reviews"</span>, <span class="st">"Price"</span>]</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> selected_columns:</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> px.box(df, x<span class="op">=</span>column, title<span class="op">=</span><span class="ss">f"Boxplot of </span><span class="sc">{</span>column<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(title_x<span class="op">=</span><span class="fl">0.5</span>)  <span class="co"># Centra el título</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
<p>Observaciones:</p>
<ul>
<li>age: no se detectan outliers</li>
<li>BMI: existen outliers, personas con una alta obesidad</li>
<li>charges: existen outliers, personas con cargos muy altos al seguro</li>
</ul>
</section>
</section>
<section id="zero-near-zero-variance-features" class="level3">
<h3 class="anchored" data-anchor-id="zero-near-zero-variance-features">3.4 Zero &amp; Near Zero Variance Features</h3>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>bestsellers.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">User Rating</th>
<th data-quarto-table-cell-role="th">Reviews</th>
<th data-quarto-table-cell-role="th">Price</th>
<th data-quarto-table-cell-role="th">Year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>349.000000</td>
<td>349.000000</td>
<td>349.000000</td>
<td>349.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>4.608596</td>
<td>9811.922636</td>
<td>12.962751</td>
<td>2014.128940</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>0.227266</td>
<td>10899.783863</td>
<td>10.011562</td>
<td>3.377239</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>3.300000</td>
<td>37.000000</td>
<td>0.000000</td>
<td>2009.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>4.500000</td>
<td>3428.000000</td>
<td>8.000000</td>
<td>2011.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>4.600000</td>
<td>6310.000000</td>
<td>11.000000</td>
<td>2014.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>4.800000</td>
<td>11550.000000</td>
<td>16.000000</td>
<td>2017.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>4.900000</td>
<td>87841.000000</td>
<td>105.000000</td>
<td>2019.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Variables númericas</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="op">=</span> [<span class="st">"User Rating"</span>, <span class="st">"Reviews"</span>, <span class="st">"Price"</span>]</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la varianza de cada columna</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>variances <span class="op">=</span> bestsellers[selected_columns].var()</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Definir un umbral para la varianza</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>threshold <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificar las columnas con varianza cercana a cero o muy pequeña</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>zero_variance_cols <span class="op">=</span> variances[variances <span class="op">&lt;=</span> threshold].index</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Columnas con Zero &amp; Near Zero Variance:"</span>)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(zero_variance_cols)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Columnas con Zero &amp; Near Zero Variance:
Index(['User Rating'], dtype='object')</code></pre>
</div>
</div>
<p>Variables categoricas. No tiene sentido en este analisis en este caso.</p>
<p>Observiaciones:</p>
<ul>
<li>No se detectan variables con Zero &amp; Near Zero Variance</li>
</ul>
</section>
<section id="missing-values" class="level3">
<h3 class="anchored" data-anchor-id="missing-values">3.5 Missing values</h3>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>bestsellers.isnull().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>Name           0
Author         0
User Rating    0
Reviews        0
Price          0
Year           0
Genre          0
dtype: int64</code></pre>
</div>
</div>
<p>Observiaciones:</p>
<ul>
<li>No hay Missing values</li>
</ul>
</section>
</section>
</section>
<section id="hipothesis-testing" class="level1">
<h1>4. Hipothesis Testing</h1>
<p>Vamos a responder a las siguientes preguntas con validez estadística: - ¿Los géneros difieren en User Rating? - ¿Los géneros difieren en número de Reviews? - ¿Los géneros difieren en términos de precio?</p>
<section id="los-géneros-difieren-en-user-rating" class="level2">
<h2 class="anchored" data-anchor-id="los-géneros-difieren-en-user-rating">¿Los géneros difieren en User Rating?</h2>
<p>Vamos a crear una variable para cada grupo de interes y representarlos gráficamente.</p>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>fiction_bestsellers <span class="op">=</span> bestsellers[bestsellers[<span class="st">"Genre"</span>] <span class="op">==</span> <span class="st">"Fiction"</span>]</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>nonfiction_bestsellers <span class="op">=</span> bestsellers[bestsellers[<span class="st">"Genre"</span>] <span class="op">==</span> <span class="st">"Non Fiction"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(fiction_bestsellers[<span class="st">"User Rating"</span>], fill<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">"r"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(nonfiction_bestsellers[<span class="st">"User Rating"</span>], fill<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">"b"</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>plt.legend([<span class="st">"Fiction"</span>, <span class="st">"Non Fiction"</span>])</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"User Rating"</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Density"</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="bestsellers_with_categories_hypothesis_testing_files/figure-html/cell-21-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el coeficiente de asimetría</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>skewness <span class="op">=</span> stats.skew(bestsellers[<span class="st">"User Rating"</span>])</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Coeficiente de asimetría:"</span>, skewness)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> skewness <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"La distribución está positivamente sesgada."</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> skewness <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"La distribución está negativamente sesgada."</span>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"La distribución es simétrica."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coeficiente de asimetría: -1.521358275451138
La distribución está negativamente sesgada.</code></pre>
</div>
</div>
<p>Número de observaciones para cada grupo:</p>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>bestsellers[<span class="st">"Genre"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>Genre
Non Fiction    190
Fiction        159
Name: count, dtype: int64</code></pre>
</div>
</div>
<p>Realizamos un test de normalidad para cada grupo:</p>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> shapiro_test(data, alpha<span class="op">=</span><span class="fl">0.05</span>):</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Realiza la prueba de Shapiro-Wilk para verificar la normalidad de los datos.</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co">    data (array-like): Los datos a analizar.</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co">    alpha (float): Nivel de significancia.</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="co">    str: El resultado de la prueba.</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    statistic, p_value <span class="op">=</span> stats.shapiro(data)</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> p_value <span class="op">&lt;</span> alpha:</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Rechazamos la hipótesis nula. Los datos no siguen una distribución normal."</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Fallamos al rechazar la hipótesis nula. Los datos pueden considerarse normalmente distribuidos."</span></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>result_fiction <span class="op">=</span> shapiro_test(fiction_bestsellers[<span class="st">"User Rating"</span>])</span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>result_nonfiction <span class="op">=</span> shapiro_test(nonfiction_bestsellers[<span class="st">"User Rating"</span>])</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Para bestsellers de ficción:"</span>, result_fiction)</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Para bestsellers de no ficción:"</span>, result_nonfiction)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Para bestsellers de ficción: Rechazamos la hipótesis nula. Los datos no siguen una distribución normal.
Para bestsellers de no ficción: Rechazamos la hipótesis nula. Los datos no siguen una distribución normal.</code></pre>
</div>
</div>
<p>Estudiemos la relación entre las varianzas de cada grupo.</p>
<div class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Realiza el Test de Levene</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>statistic, p_value <span class="op">=</span> stats.levene(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    fiction_bestsellers[<span class="st">"User Rating"</span>], nonfiction_bestsellers[<span class="st">"User Rating"</span>]</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Nivel de significancia</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Comprueba la significancia</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> p_value <span class="op">&lt;</span> alpha:</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Rechazamos la hipótesis nula. Las varianzas no son similares"</span>)</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Fallamos al rechazar la hipótesis nula. Las varianzas son similares"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rechazamos la hipótesis nula. Las varianzas no son similares</code></pre>
</div>
</div>
<div class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># varianza de los grupos</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>bestsellers.groupby([<span class="st">"Genre"</span>])[<span class="st">"User Rating"</span>].var()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<pre><code>Genre
Fiction        0.075720
Non Fiction    0.031736
Name: User Rating, dtype: float64</code></pre>
</div>
</div>
<section id="seleccionamos-la-hipotesis-y-el-nivel-de-significancia" class="level3">
<h3 class="anchored" data-anchor-id="seleccionamos-la-hipotesis-y-el-nivel-de-significancia">1. Seleccionamos la hipotesis y el nivel de significancia</h3>
<p>H0: El “User Rating” de los libros de ficción es igual que el de los libros de no ficción</p>
<p>Ha: El “User Rating” de los libros de ficción es diferente que el de los libros de no ficción</p>
<p>alpha = 0.05</p>
</section>
<section id="identificamos-el-tipo-de-test" class="level3">
<h3 class="anchored" data-anchor-id="identificamos-el-tipo-de-test">2. Identificamos el tipo de test</h3>
<p>Deseamos comparar las medias de dos grupos de nuestra Sample. Por lo que un 2-Sample t-Test parece lo adecuado. Lo primero es ver si se cumplen los requisitos del test.</p>
<section id="requisitos-del-test" class="level4">
<h4 class="anchored" data-anchor-id="requisitos-del-test">2.1 Requisitos del test</h4>
<p>[Book:Hypothesis Testing An Intuitive Guide For Making Data Driven Decisions Page: 48 Section: 2-Sample t-Tests] - Tenemos un Sample representativo de la población? Si. - Los datos son continuos? - En este contexto, los “User Rating” que van de 0 a 5 con un único decimal pueden considerarse como datos continuos. Sim embargo, observando las gráficas, vemos que la mayoría de los valores se encuetran en un intervalor muy pequeño (mayores a 4.0). Esto dificulta el poder considerarlo continuos. - Las muestras siguen una distribución normal o hay más de 15 observaciones - No, las muestras no siguen una distribución normal. Pero hay más de 15 observaciones en cada grupo, gracias al teorema del límite central podemos renunciar al supuesto de normalidad. - Los grupos son independientes? Si. - Las varianzas son iguales (o al menos similares)? - No.</p>
<p>Por la falta de continuidad en los datos, vamos a realizar un <strong>test no paramétrico Mann-Whitney</strong>.</p>
<p>[Book:Hypothesis Testing An Intuitive Guide For Making Data Driven Decisions Page: 341 Section: Analyzing Likert Scale Data]</p>
<p>Para realizar el test vamos a usar <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.mannwhitneyu.html">scipy.stats.mannwhitneyu</a></p>
<div class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Realiza el test de Mann-Whitney</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>statistic, p_value <span class="op">=</span> stats.mannwhitneyu(</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    nonfiction_bestsellers[<span class="st">"User Rating"</span>], fiction_bestsellers[<span class="st">"User Rating"</span>]</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprime los resultados</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Valor p:"</span>, p_value)</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Comprueba la significancia</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="fl">0.05</span>  <span class="co"># Nivel de significancia</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> p_value <span class="op">&lt;</span> alpha:</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Rechazamos la hipótesis nula. Hay diferencias significativas entre los grupos."</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Fallamos al rechazar la hipótesis nula. No hay diferencias significativas entre los grupos."</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Valor p: 0.019840907319029977
Rechazamos la hipótesis nula. Hay diferencias significativas entre los grupos.</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="los-géneros-difieren-en-número-de-reviews" class="level2">
<h2 class="anchored" data-anchor-id="los-géneros-difieren-en-número-de-reviews">¿Los géneros difieren en número de Reviews?</h2>
<p>Representamos gráficamente los grupos de interés.</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(fiction_bestsellers[<span class="st">"Reviews"</span>], fill<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">"r"</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(nonfiction_bestsellers[<span class="st">"Reviews"</span>], fill<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">"b"</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>plt.legend([<span class="st">"Fiction"</span>, <span class="st">"Non Fiction"</span>])</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"User Rating"</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Density"</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="bestsellers_with_categories_hypothesis_testing_files/figure-html/cell-28-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el coeficiente de asimetría</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>skewness <span class="op">=</span> stats.skew(bestsellers[<span class="st">"Reviews"</span>])</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Coeficiente de asimetría:"</span>, skewness)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> skewness <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"La distribución está positivamente sesgada."</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> skewness <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"La distribución está negativamente sesgada."</span>)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"La distribución es simétrica."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coeficiente de asimetría: 3.119812029552558
La distribución está positivamente sesgada.</code></pre>
</div>
</div>
<p>Número de observaciones para cada grupo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>bestsellers[<span class="st">"Genre"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Genre
Non Fiction    190
Fiction        159
Name: count, dtype: int64</code></pre>
</div>
</div>
<p>Realizamos un test de normalidad para cada grupo:</p>
<div class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> shapiro_test(data, alpha<span class="op">=</span><span class="fl">0.05</span>):</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Realiza la prueba de Shapiro-Wilk para verificar la normalidad de los datos.</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="co">    data (array-like): Los datos a analizar.</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="co">    alpha (float): Nivel de significancia.</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a><span class="co">    str: El resultado de la prueba.</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>    statistic, p_value <span class="op">=</span> stats.shapiro(data)</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> p_value <span class="op">&lt;</span> alpha:</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Rechazamos la hipótesis nula. Los datos no siguen una distribución normal."</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Fallamos al rechazar la hipótesis nula. Los datos pueden considerarse normalmente distribuidos."</span></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>result_fiction <span class="op">=</span> shapiro_test(fiction_bestsellers[<span class="st">"Reviews"</span>])</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>result_nonfiction <span class="op">=</span> shapiro_test(nonfiction_bestsellers[<span class="st">"Reviews"</span>])</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Para bestsellers de ficción:"</span>, result_fiction)</span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Para bestsellers de no ficción:"</span>, result_nonfiction)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Para bestsellers de ficción: Rechazamos la hipótesis nula. Los datos no siguen una distribución normal.
Para bestsellers de no ficción: Rechazamos la hipótesis nula. Los datos no siguen una distribución normal.</code></pre>
</div>
</div>
<p>Estudiemos la relación entre las varianzas de cada grupo.</p>
<div class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># varianza de los grupos</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>bestsellers.groupby([<span class="st">"Genre"</span>])[<span class="st">"Reviews"</span>].var()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>Genre
Fiction        1.781185e+08
Non Fiction    5.265203e+07
Name: Reviews, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Realiza el Test de Levene</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>statistic, p_value <span class="op">=</span> stats.levene(</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    fiction_bestsellers[<span class="st">"User Rating"</span>], nonfiction_bestsellers[<span class="st">"User Rating"</span>]</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Nivel de significancia</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Comprueba la significancia</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> p_value <span class="op">&lt;</span> alpha:</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Rechazamos la hipótesis nula. Las varianzas no son similares"</span>)</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Fallamos al rechazar la hipótesis nula. Las varianzas son similares"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rechazamos la hipótesis nula. Las varianzas son diferentes</code></pre>
</div>
</div>
<section id="seleccionamos-la-hipotesis-y-el-nivel-de-significancia-1" class="level3">
<h3 class="anchored" data-anchor-id="seleccionamos-la-hipotesis-y-el-nivel-de-significancia-1">1. Seleccionamos la hipotesis y el nivel de significancia</h3>
<p>H0: El número de Reviews medio de los libros de ficción es igual que el de los libros de no ficción</p>
<p>Ha: El número de Reviews medio de los libros de ficción es diferente que el de los libros de no ficción</p>
<p>alpha = 0.05</p>
</section>
<section id="identificamos-el-tipo-de-test-1" class="level3">
<h3 class="anchored" data-anchor-id="identificamos-el-tipo-de-test-1">2. Identificamos el tipo de test</h3>
<p>Deseamos comparar las medias de dos grupos de nuestra Sample. Por lo que un 2-Sample t-Test parece lo adecuado. Lo primero es ver si se cumplen los requisitos del test.</p>
<section id="requisitos-del-test-1" class="level4">
<h4 class="anchored" data-anchor-id="requisitos-del-test-1">2.1 Requisitos del test</h4>
<p>[Book:Hypothesis Testing An Intuitive Guide For Making Data Driven Decisions Page: 48 Section: 2-Sample t-Tests] - Tenemos un Sample representativo de la población? Si. - Los datos son continuos? Si. - Las muestras siguen una distribución normal o hay más de 15 observaciones - No, las muestras no siguen una distribución normal. Pero hay más de 15 observaciones en cada grupo, gracias al teorema del límite central podemos renunciar al supuesto de normalidad. - Los grupos son independientes? Si. - Las varianzas son iguales (o al menos similares)? - No.</p>
<p>Las varianzas no son similares y su relación es de más del doble. Vamos a reliazar un test tipo <strong>Welch’s t-test</strong>.</p>
<p>Para realizar el test vamos a usar <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ttest_ind.html">scipy.stats.ttest_ind</a>. Para realizar este test, es necesario definir el parametro <em>equal_varbool</em> como <em>False</em>.</p>
<div class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Realiza el test t de Welch (equal_var=False)</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>statistic, p_value <span class="op">=</span> stats.ttest_ind(</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    nonfiction_bestsellers[<span class="st">"Reviews"</span>], fiction_bestsellers[<span class="st">"Reviews"</span>], equal_var<span class="op">=</span><span class="va">False</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprime los resultados</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Valor p:"</span>, p_value)</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Comprueba la significancia</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="fl">0.05</span>  <span class="co"># Nivel de significancia</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> p_value <span class="op">&lt;</span> alpha:</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Rechazamos la hipótesis nula: Hay diferencias significativas entre los grupos."</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"No podemos rechazar la hipótesis nula: No hay diferencias significativas entre los grupos."</span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Valor p: 4.7012426165976585e-07
Rechazamos la hipótesis nula: Hay diferencias significativas entre los grupos.</code></pre>
</div>
</div>
<p>Los libros del género de ficción obtienen más Reviews que los libros de no ficción.</p>
</section>
</section>
</section>
<section id="los-géneros-difieren-en-términos-de-price" class="level2">
<h2 class="anchored" data-anchor-id="los-géneros-difieren-en-términos-de-price">¿Los géneros difieren en términos de Price?</h2>
<p>Representamos gráficamente los datos.</p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(fiction_bestsellers[<span class="st">"Price"</span>], fill<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">"r"</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(nonfiction_bestsellers[<span class="st">"Price"</span>], fill<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">"b"</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>plt.legend([<span class="st">"Fiction"</span>, <span class="st">"Non Fiction"</span>])</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"User Rating"</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Density"</span>)</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="bestsellers_with_categories_hypothesis_testing_files/figure-html/cell-35-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el coeficiente de asimetría</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>skewness <span class="op">=</span> stats.skew(bestsellers[<span class="st">"Price"</span>])</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Coeficiente de asimetría:"</span>, skewness)</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> skewness <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"La distribución está positivamente sesgada."</span>)</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> skewness <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"La distribución está negativamente sesgada."</span>)</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"La distribución es simétrica."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coeficiente de asimetría: 4.059768474746167
La distribución está positivamente sesgada.</code></pre>
</div>
</div>
<p>Realizamos un test de normalidad para cada grupo:</p>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> shapiro_test(data, alpha<span class="op">=</span><span class="fl">0.05</span>):</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Realiza la prueba de Shapiro-Wilk para verificar la normalidad de los datos.</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="co">    data (array-like): Los datos a analizar.</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="co">    alpha (float): Nivel de significancia.</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a><span class="co">    str: El resultado de la prueba.</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    statistic, p_value <span class="op">=</span> stats.shapiro(data)</span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> p_value <span class="op">&lt;</span> alpha:</span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (</span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Rechazamos la hipótesis nula. Los datos no siguen una distribución normal."</span></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Fallamos al rechazar la hipótesis nula. Los datos pueden considerarse normalmente distribuidos."</span></span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a>result_fiction <span class="op">=</span> shapiro_test(fiction_bestsellers[<span class="st">"Price"</span>])</span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a>result_nonfiction <span class="op">=</span> shapiro_test(nonfiction_bestsellers[<span class="st">"Price"</span>])</span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Para bestsellers de ficción:"</span>, result_fiction)</span>
<span id="cb58-29"><a href="#cb58-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Para bestsellers de no ficción:"</span>, result_nonfiction)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Para bestsellers de ficción: Rechazamos la hipótesis nula. Los datos no siguen una distribución normal.
Para bestsellers de no ficción: Rechazamos la hipótesis nula. Los datos no siguen una distribución normal.</code></pre>
</div>
</div>
<p>Estudiemos la relación entre las varianzas de cada grupo.</p>
<div class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Realiza el Test de Levene</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>statistic, p_value <span class="op">=</span> stats.levene(</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    fiction_bestsellers[<span class="st">"Price"</span>], nonfiction_bestsellers[<span class="st">"Price"</span>]</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Nivel de significancia</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Comprueba la significancia</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> p_value <span class="op">&lt;</span> alpha:</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Rechazamos la hipótesis nula. Las varianzas no son similares"</span>)</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Fallamos al rechazar la hipótesis nula. Las varianzas son similares"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Fallamos al rechazar la hipótesis nula. Las varianzas son similares</code></pre>
</div>
</div>
<div class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># varianza de los grupos</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>bestsellers.groupby([<span class="st">"Genre"</span>])[<span class="st">"Price"</span>].var()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="75">
<pre><code>Genre
Fiction         91.521376
Non Fiction    107.024673
Name: Price, dtype: float64</code></pre>
</div>
</div>
<section id="seleccionamos-la-hipotesis-y-el-nivel-de-significancia-2" class="level3">
<h3 class="anchored" data-anchor-id="seleccionamos-la-hipotesis-y-el-nivel-de-significancia-2">1. Seleccionamos la hipotesis y el nivel de significancia</h3>
<p>H0: El precio medio de los libros de ficción es igual que el de los libros de no ficción</p>
<p>Ha: El precio medio de los libros de ficción es diferente que el de los libros de no ficción</p>
<p>alpha = 0.05</p>
</section>
<section id="identificamos-el-tipo-de-test-2" class="level3">
<h3 class="anchored" data-anchor-id="identificamos-el-tipo-de-test-2">2. Identificamos el tipo de test</h3>
<p>Deseamos comparar las medias de dos grupos de nuestra Sample. Por lo que un 2-Sample t-Test parece lo adecuado. Lo primero es ver si se cumplen los requisitos del test.</p>
<section id="requisitos-del-test-2" class="level4">
<h4 class="anchored" data-anchor-id="requisitos-del-test-2">2.1 Requisitos del test</h4>
<p>[Book:Hypothesis Testing An Intuitive Guide For Making Data Driven Decisions Page: 48 Section: 2-Sample t-Tests] - Tenemos un Sample representativo de la población? Si. - Los datos son continuos? Si. - Las muestras siguen una distribución normal o hay más de 15 observaciones - No, las muestras no siguen una distribución normal. Pero hay más de 15 observaciones en cada grupo, gracias al teorema del límite central podemos renunciar al supuesto de normalidad. - Los grupos son independientes? Si. - Las varianzas son iguales (o al menos similares)? Si.</p>
<p>Se cumplen los requisitos para realizar un <strong>2-Sample t-Test</strong>.</p>
<p>Para realizar el test vamos a usar <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ttest_ind.html">scipy.stats.ttest_ind</a>.</p>
<div class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Realiza el test t</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>statistic, p_value <span class="op">=</span> stats.ttest_ind(</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    nonfiction_bestsellers[<span class="st">"Price"</span>], fiction_bestsellers[<span class="st">"Price"</span>]</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprime los resultados</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Valor p:"</span>, p_value)</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Comprueba la significancia</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="fl">0.05</span>  <span class="co"># Nivel de significancia</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> p_value <span class="op">&lt;</span> alpha:</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Rechazamos la hipótesis nula: Hay diferencias significativas entre los grupos."</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(</span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"No podemos rechazar la hipótesis nula: No hay diferencias significativas entre los grupos."</span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Valor p: 0.16615124881617802
No podemos rechazar la hipótesis nula: No hay diferencias significativas entre los grupos.</code></pre>
</div>
</div>
<p>El precio no es dependiente del género.</p>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>